dist: focal
language: cpp
os: linux
jobs:
  include:
    - os: linux
      compiler: gcc
    - os: linux
      compiler: clang
    - os: osx
      compiler: clang
## Msys2 environment here doesn't work well 
##    - os: windows
##      compiler: gcc
## See https://docs.travis-ci.com/user/reference/windows#how-do-i-use-msys2 when enabling again.
script:
  - ./configure test
  - ./configure test
  - cd build-test
  - sudo make install
  - if [ "$TRAVIS_OS_NAME" = "linux" ]; then sudo ldconfig; fi
  - make test
addons:
  apt:
    update: true
    packages:
    - cmake
    - libboost-test-dev
    - libboost-serialization-dev
  homebrew:
    packages:
    - cmake
    - pkg-config
    - boost